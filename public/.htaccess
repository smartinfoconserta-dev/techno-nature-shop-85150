# ==========================================
# RAMON TECH - Configuração para Hostinger
# ==========================================

# MIME Types - CRÍTICO para evitar erro 406
AddType application/javascript .js .mjs
AddType text/css .css
AddType application/json .json
AddDefaultCharset UTF-8

# Desabilitar mod_security completamente
<IfModule mod_security.c>
  SecFilterEngine Off
  SecFilterScanPOST Off
  SecFilterCheckURLEncoding Off
  SecFilterCheckCookieFormat Off
</IfModule>

# Permitir todos os métodos HTTP
<IfModule mod_headers.c>
  Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS, PATCH"
  Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Accept, apikey, x-client-info"
  
  # Anti-cache AGRESSIVO para HTML e Service Workers
  <FilesMatch "\.(html)$">
    Header always set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header always set Pragma "no-cache"
    Header always set Expires "0"
  </FilesMatch>
  
  # Bloquear cache de qualquer arquivo de service worker
  <FilesMatch "(service-worker|sw|workbox.*)\.(js|json)$">
    Header always set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header always set Pragma "no-cache"
    Header always set Expires "0"
  </FilesMatch>
</IfModule>

# Desabilitar cache do LiteSpeed
<IfModule LiteSpeed>
  CacheDisable public /
  CacheDisable private /
</IfModule>

# HTTPS Redirect (descomente se tiver SSL ativo)
# <IfModule mod_rewrite.c>
#   RewriteEngine On
#   RewriteCond %{HTTPS} off
#   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
# </IfModule>

# Headers de Segurança
<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Compressão GZIP
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/css text/javascript application/javascript application/json
</IfModule>

# Cache para Assets
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType text/html "access plus 0 seconds"
</IfModule>

# React Router - SPA Support
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-l
  RewriteRule . /index.html [L]
</IfModule>

# Proteção de Arquivos Sensíveis
<FilesMatch "^\.">
  Order allow,deny
  Deny from all
</FilesMatch>

# Desabilitar listagem de diretórios
Options -Indexes
