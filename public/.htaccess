# ==========================================
# RAMON TECH - Configuração para Hostinger
# ==========================================

# MIME Types
AddType application/javascript .js .mjs
AddType text/css .css
AddType application/json .json
AddDefaultCharset UTF-8

# Forçar HTTPS automaticamente
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Força HTTPS
  RewriteCond %{HTTPS} !=on
  RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  
  # Redireciona www para não-www
  RewriteCond %{HTTP_HOST} ^www\.ramontech\.com\.br$ [NC]
  RewriteRule ^(.*)$ https://ramontech.com.br/$1 [L,R=301]
  
  # SPA Support - Redireciona tudo para index.html
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>

# Evita cache agressivo
<IfModule mod_headers.c>
  # Cache-Control para HTML
  <FilesMatch "\.(html)$">
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
  
  # Cache para assets com hash (gerados pelo Vite)
  <FilesMatch "\.[a-f0-9]{8,}\.(js|css|png|jpg|jpeg|webp|svg)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# Headers de Segurança
<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
</IfModule>

# Compressão GZIP
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/css text/javascript application/javascript application/json
</IfModule>

# Proteção de Arquivos Sensíveis
<FilesMatch "^\.">
  Order allow,deny
  Deny from all
</FilesMatch>

# Desabilitar listagem de diretórios
Options -Indexes
